<!doctype html><html lang=en><head><meta charset=utf-8><meta content="IE=edge,chrome=1" http-equiv=x-ua-compatible><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>ito API</title><link href=/styles/screen.min.effe22ccbf96cbbaaf00a2e507f631d3322b75caa57a23f93c11e3e6085a1b93.css rel=stylesheet media=screen integrity="sha256-7/4izL+Wy7qvAKLlB/Yx0zIrdcqleiP5PBHj5ghaG5M="><link href=/styles/print.min.37fed562cbce32487e14eddeaa39b2e79a3881ecb2baef830072d78b6fe0c70d.css rel=stylesheet media=print integrity="sha256-N/7VYsvOMkh+FO3eqjmy55o4geyyuu+DAHLXi2/gxw0="><script src=/js/all.min.af482a17639ac52499e7e9f85314de520da5a075168d0c2410145640dea01b9a.js integrity="sha256-r0gqF2OaxSSZ5+n4UxTeUg2loHUWjQwkEBRWQN6gG5o="></script></head><body class=index data-languages='[ "go" ,  "java" ]'><a href=# id=nav-button><span>NAV
<img src=/images/navbar.png></span></a><div class=toc-wrapper><img src=/images/logo.png class=logo><div class=lang-selector><a href=# data-language-name=go>Go</a>
<a href=# data-language-name=java>Java</a></div><div class=search><input type=search class=search id=input-search placeholder=Search></div><ul class=search-results></ul><ul id=toc class=toc-list-h1><li><a href=#installation class="toc-h1 toc-link" data-title=Installation>Installation</a><ul class=toc-list-h2><li><a href=#docker-compose class="toc-h2 toc-link" data-title="Docker Compose">Docker Compose</a></li></ul></li><li><a href=#api class="toc-h1 toc-link" data-title=API>API</a><ul class=toc-list-h2><li><a href=#fetching-reports class="toc-h2 toc-link" data-title="Fetching reports">Fetching reports</a></li><li><a href=#publishing-a-report class="toc-h2 toc-link" data-title="Publishing a report">Publishing a report</a></li></ul></li></ul><ul class=toc-footer><li>Edit on Github</li><li>Documentation Powered by <a href=https://github.com/bep/docuapi>DocuAPI</a></li><li>Hugo Theme by <a href=https://github.com/bep>bep</a></li></ul></div><div class=page-wrapper><div class=dark-box></div><div class=content><h1 id=installation>Installation</h1><blockquote><p>You can clone the repositoring by using this code</p></blockquote><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git clone https://github.com/ito-org/api-backend
</code></pre></div><p>To start with this application, download the current version by using <code>git clone</code>.</p><p>The recommended way to install the API server is to use docker with <code>docker-compose</code>.</p><h2 id=docker-compose>Docker Compose</h2><p>To start <code>docker-compose</code> you need to set the following environment variables so that the server knows how to connect to your Postgres database. For that you can add an <code>.env</code> file to the root of the api-backend folder with the following lines.</p><h3 id=environment-variables>Environment Variables</h3><blockquote><p>Example <code>.env</code> file</p></blockquote><pre><code>POSTGRES_DB:       &lt;Database name&gt;
POSTGRES_USER:     &lt;Username for db&gt;
POSTGRES_PASSWORD: &lt;secretpw&gt;
</code></pre><table><thead><tr><th>Parameter</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>POSTGRES_DB</td><td>yes</td><td>The name of the postgres database</td></tr><tr><td>POSTGRES_USER</td><td>yes</td><td>The postgres user with access to the database</td></tr><tr><td>POSTGRES_PASSWORD</td><td>yes</td><td>A secret password for the database user</td></tr></tbody></table><h3 id=docker-compose-example>Docker-Compose Example</h3><blockquote><p>Example <code>docker-compose.yaml</code></p></blockquote><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-docker data-lang=docker>version: <span style=color:#e6db74>&#34;3&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>services:<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>  go-backend:<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    build:<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>      context: .<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>      dockerfile: Dockerfile<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    env_file: .env<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    ports:<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>      - 8080:8080<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    depends_on:<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>      - postgres<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    networks:<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>      - itonet<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>  postgres:<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    image: postgres:12<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    env_file: .env<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    volumes:<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>      - ./db/db.sql:/docker-entrypoint-initdb.d/db.sql<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>      - dbvol:/var/lib/postgresql/data<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    networks:<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>      - itonet<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    restart: always<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>networks:<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>  itonet:<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>volumes:<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>  dbvol:<span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>You can use the example <code>docker-compose.yml</code> in the repository to start a fully working installation backend.</p><p>Starting the containers with <code>docker-compose up</code> to start it in forground mode or use <code>docker-compose up -d</code> to start it as a deamon.</p><h1 id=api>API</h1><p>The ito API has intentionally been kept extremely lean, there is only one endpoint: <code>https://tcn.ito-app.org/tcnreport</code></p><blockquote><p>Initialization</p></blockquote><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>

<span style=color:#f92672>import</span> (
	<span style=color:#e6db74>&#34;bytes&#34;</span>
	<span style=color:#e6db74>&#34;net/http&#34;</span>
	<span style=color:#e6db74>&#34;github.com/ito-org/go-backend/tcn&#34;</span>
)
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ItoApi</span> <span style=color:#f92672>{</span>
	<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> String BASE_URL
		<span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;https://tcn.ito-app.org&#34;</span><span style=color:#f92672>;</span>
<span style=color:#f92672>}</span>
</code></pre></div><p>This way our code stays easy to understand and to audit.</p><h2 id=fetching-reports>Fetching reports</h2><p>With a <code>GET</code> request you can download all recent reports of infected users. Those are returned as a bytestream (MIME type <code>application/octet-stream</code>) of TCN reports as per the protocol definition.</p><blockquote><p>Example client code for fetching recent reports</p></blockquote><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>int</span> BASELENGTH <span style=color:#f92672>=</span> 70<span style=color:#f92672>;</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> List<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>byte</span><span style=color:#f92672>[</span><span style=color:#f92672>]</span><span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>getReports</span><span style=color:#f92672>(</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
	List<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>byte</span><span style=color:#f92672>[</span><span style=color:#f92672>]</span><span style=color:#f92672>&gt;</span> reports <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> LinkedList<span style=color:#f92672>&lt;</span><span style=color:#f92672>&gt;</span><span style=color:#f92672>(</span><span style=color:#f92672>)</span><span style=color:#f92672>;</span>
	HttpURLConnection urlConnection <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
	<span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
		URL url <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> URL<span style=color:#f92672>(</span>BASE_URL <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;/tcnreport&#34;</span><span style=color:#f92672>)</span><span style=color:#f92672>;</span>
		urlConnection
			<span style=color:#f92672>=</span> <span style=color:#f92672>(</span>HttpURLConnection<span style=color:#f92672>)</span> url<span style=color:#f92672>.</span><span style=color:#a6e22e>openConnection</span><span style=color:#f92672>(</span><span style=color:#f92672>)</span><span style=color:#f92672>;</span>
		urlConnection<span style=color:#f92672>.</span><span style=color:#a6e22e>addRequestProperty</span><span style=color:#f92672>(</span>
			<span style=color:#e6db74>&#34;Accept&#34;</span><span style=color:#f92672>,</span>
			<span style=color:#e6db74>&#34;application/octet-stream&#34;</span>
		<span style=color:#f92672>)</span><span style=color:#f92672>;</span>
		InputStream in <span style=color:#f92672>=</span> urlConnection<span style=color:#f92672>.</span><span style=color:#a6e22e>getInputStream</span><span style=color:#f92672>(</span><span style=color:#f92672>)</span><span style=color:#f92672>;</span>
		<span style=color:#66d9ef>byte</span><span style=color:#f92672>[</span><span style=color:#f92672>]</span> base <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>byte</span><span style=color:#f92672>[</span>BASELENGTH<span style=color:#f92672>]</span><span style=color:#f92672>;</span>
		<span style=color:#66d9ef>byte</span><span style=color:#f92672>[</span><span style=color:#f92672>]</span> memo<span style=color:#f92672>;</span>
		<span style=color:#66d9ef>int</span> readBytes<span style=color:#f92672>;</span>
		<span style=color:#66d9ef>while</span> <span style=color:#f92672>(</span><span style=color:#f92672>(</span>readBytes <span style=color:#f92672>=</span> in<span style=color:#f92672>.</span><span style=color:#a6e22e>read</span><span style=color:#f92672>(</span>base<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> BASELENGTH<span style=color:#f92672>)</span><span style=color:#f92672>)</span>
				<span style=color:#f92672>=</span><span style=color:#f92672>=</span> BASELENGTH<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
			<span style=color:#66d9ef>int</span> memolength
				<span style=color:#f92672>=</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>)</span> base<span style=color:#f92672>[</span>BASELENGTH <span style=color:#f92672>-</span> 1<span style=color:#f92672>]</span> <span style=color:#f92672>&amp;</span> 0xFF<span style=color:#f92672>;</span>
			memo <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>byte</span><span style=color:#f92672>[</span>memolength<span style=color:#f92672>]</span><span style=color:#f92672>;</span>
			<span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>in<span style=color:#f92672>.</span><span style=color:#a6e22e>read</span><span style=color:#f92672>(</span>memo<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> memolength<span style=color:#f92672>)</span>
					<span style=color:#f92672>&lt;</span> memolength<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
				<span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> RuntimeException<span style=color:#f92672>(</span>
					<span style=color:#e6db74>&#34;Parsing from server failed&#34;</span>
				<span style=color:#f92672>)</span><span style=color:#f92672>;</span>
			<span style=color:#f92672>}</span>
			System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>
				<span style=color:#e6db74>&#34;Downloaded TCN Report: &#34;</span>
				<span style=color:#f92672>+</span> encodeHexString<span style=color:#f92672>(</span>base<span style=color:#f92672>)</span>
				<span style=color:#f92672>+</span> encodeHexString<span style=color:#f92672>(</span>memo<span style=color:#f92672>)</span>
			<span style=color:#f92672>)</span><span style=color:#f92672>;</span>
			ByteBuffer report <span style=color:#f92672>=</span> ByteBuffer<span style=color:#f92672>.</span><span style=color:#a6e22e>allocate</span><span style=color:#f92672>(</span>
				BASELENGTH <span style=color:#f92672>+</span> memolength
			<span style=color:#f92672>)</span><span style=color:#f92672>;</span>
			report<span style=color:#f92672>.</span><span style=color:#a6e22e>put</span><span style=color:#f92672>(</span>base<span style=color:#f92672>)</span><span style=color:#f92672>;</span>
			report<span style=color:#f92672>.</span><span style=color:#a6e22e>put</span><span style=color:#f92672>(</span>memo<span style=color:#f92672>)</span><span style=color:#f92672>;</span>
			reports<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span>report<span style=color:#f92672>.</span><span style=color:#a6e22e>array</span><span style=color:#f92672>(</span><span style=color:#f92672>)</span><span style=color:#f92672>)</span><span style=color:#f92672>;</span>
		<span style=color:#f92672>}</span>
		<span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>readBytes <span style=color:#f92672>&gt;</span> 0<span style=color:#f92672>)</span>
			<span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> RuntimeException<span style=color:#f92672>(</span>
				<span style=color:#e6db74>&#34;Parsing from server failed&#34;</span>
			<span style=color:#f92672>)</span><span style=color:#f92672>;</span>
	<span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>MalformedURLException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
		<span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> RuntimeException<span style=color:#f92672>(</span>e<span style=color:#f92672>)</span><span style=color:#f92672>;</span>
	<span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>IOException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
		e<span style=color:#f92672>.</span><span style=color:#a6e22e>printStackTrace</span><span style=color:#f92672>(</span><span style=color:#f92672>)</span><span style=color:#f92672>;</span>
	<span style=color:#f92672>}</span> <span style=color:#66d9ef>finally</span> <span style=color:#f92672>{</span>
		<span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>urlConnection <span style=color:#f92672>!</span><span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
			urlConnection<span style=color:#f92672>.</span><span style=color:#a6e22e>disconnect</span><span style=color:#f92672>(</span><span style=color:#f92672>)</span><span style=color:#f92672>;</span>
		<span style=color:#f92672>}</span>
	<span style=color:#f92672>}</span>
	<span style=color:#66d9ef>return</span> reports<span style=color:#f92672>;</span>
<span style=color:#f92672>}</span>
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
	<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>rak</span>, <span style=color:#a6e22e>report</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>tcn</span>.<span style=color:#a6e22e>GenerateReport</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, []byte(<span style=color:#e6db74>&#34;symptom data&#34;</span>))
	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
		<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Error</span>(<span style=color:#a6e22e>err</span>)
		<span style=color:#66d9ef>return</span>
	}

	<span style=color:#a6e22e>signedReport</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>tcn</span>.<span style=color:#a6e22e>GenerateSignedReport</span>(<span style=color:#a6e22e>rak</span>, <span style=color:#a6e22e>report</span>)
	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
		<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Error</span>(<span style=color:#a6e22e>err</span>)
		<span style=color:#66d9ef>return</span>
	}

	<span style=color:#a6e22e>b</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>signedReport</span>.<span style=color:#a6e22e>Bytes</span>()
	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
		<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Error</span>(<span style=color:#a6e22e>err</span>)
		<span style=color:#66d9ef>return</span>
	}
	<span style=color:#a6e22e>rec</span>, <span style=color:#a6e22e>req</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>NewRequest</span>(<span style=color:#e6db74>&#34;POST&#34;</span>, <span style=color:#e6db74>&#34;/tcnreport&#34;</span>, <span style=color:#a6e22e>bytes</span>.<span style=color:#a6e22e>NewReader</span>(<span style=color:#a6e22e>b</span>))
	<span style=color:#a6e22e>req</span>, <span style=color:#a6e22e>_</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>NewRequest</span>(<span style=color:#e6db74>&#34;GET&#34;</span>, <span style=color:#e6db74>&#34;/tcnreport&#34;</span>, <span style=color:#66d9ef>nil</span>)
}
</code></pre></div><h2 id=publishing-a-report>Publishing a report</h2><p>With a <code>POST</code> request you can report yourself as infected.</p><blockquote><p>Example client code for submitting a report</p></blockquote><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>publishReport</span><span style=color:#f92672>(</span>
	<span style=color:#66d9ef>byte</span><span style=color:#f92672>[</span><span style=color:#f92672>]</span> report
<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> IOException <span style=color:#f92672>{</span>
	HttpURLConnection urlConnection <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
	<span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
		URL url <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> URL<span style=color:#f92672>(</span>BASE_URL <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;/tcnreport&#34;</span><span style=color:#f92672>)</span><span style=color:#f92672>;</span>
		urlConnection
			<span style=color:#f92672>=</span> <span style=color:#f92672>(</span>HttpURLConnection<span style=color:#f92672>)</span> url<span style=color:#f92672>.</span><span style=color:#a6e22e>openConnection</span><span style=color:#f92672>(</span><span style=color:#f92672>)</span><span style=color:#f92672>;</span>
		urlConnection<span style=color:#f92672>.</span><span style=color:#a6e22e>setDoOutput</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>)</span><span style=color:#f92672>;</span>
		urlConnection<span style=color:#f92672>.</span><span style=color:#a6e22e>addRequestProperty</span><span style=color:#f92672>(</span>
			<span style=color:#e6db74>&#34;Content-Type&#34;</span><span style=color:#f92672>,</span>
			<span style=color:#e6db74>&#34;application/octet-stream&#34;</span>
		<span style=color:#f92672>)</span><span style=color:#f92672>;</span>
		OutputStream outputStream
			<span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> BufferedOutputStream<span style=color:#f92672>(</span>
				urlConnection<span style=color:#f92672>.</span><span style=color:#a6e22e>getOutputStream</span><span style=color:#f92672>(</span><span style=color:#f92672>)</span>
			  <span style=color:#f92672>)</span><span style=color:#f92672>;</span>
		outputStream<span style=color:#f92672>.</span><span style=color:#a6e22e>write</span><span style=color:#f92672>(</span>report<span style=color:#f92672>)</span><span style=color:#f92672>;</span>
		outputStream<span style=color:#f92672>.</span><span style=color:#a6e22e>close</span><span style=color:#f92672>(</span><span style=color:#f92672>)</span><span style=color:#f92672>;</span>

		InputStream inputStream
			<span style=color:#f92672>=</span> urlConnection<span style=color:#f92672>.</span><span style=color:#a6e22e>getInputStream</span><span style=color:#f92672>(</span><span style=color:#f92672>)</span><span style=color:#f92672>;</span>
		inputStream<span style=color:#f92672>.</span><span style=color:#a6e22e>read</span><span style=color:#f92672>(</span><span style=color:#f92672>)</span><span style=color:#f92672>;</span>
		inputStream<span style=color:#f92672>.</span><span style=color:#a6e22e>close</span><span style=color:#f92672>(</span><span style=color:#f92672>)</span><span style=color:#f92672>;</span>
	<span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>MalformedURLException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
		<span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> RuntimeException<span style=color:#f92672>(</span>e<span style=color:#f92672>)</span><span style=color:#f92672>;</span>
	<span style=color:#f92672>}</span> <span style=color:#66d9ef>finally</span> <span style=color:#f92672>{</span>
		<span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>urlConnection <span style=color:#f92672>!</span><span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span>
			urlConnection<span style=color:#f92672>.</span><span style=color:#a6e22e>disconnect</span><span style=color:#f92672>(</span><span style=color:#f92672>)</span><span style=color:#f92672>;</span>
	<span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div></div><div class=dark-box><div class=lang-selector><a href=# data-language-name=go>Go</a>
<a href=# data-language-name=java>Java</a></div></div></div></body></html>